## Отправка фотографий в телеграм канал

Скрипты для скачивания фото на космическую тематику:
- Фотографии с запуска SpaceX 
- Астрономические картинки дня с сайта NASA
- Фотографии с камеры полихроматического изображения Земли

Скрипт для публикации фотографий в телеграм канал


### Необходимые требования

1. Токен [NASA](https://api.nasa.gov/)
2. Токен телеграм бота
3. Бот должен быть добавлен администратором в телеграм канал

[Как создать канал, бота и получить токен](https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/)

### Как установить

- Python3 должен быть уже установлен
- в директории с файлами программы необходимо создать `.env` файл, в котором прописать токены и название группы телеграм
```
NASA_API_TOKEN=thisistoKeN4example
TELEGRAM_TOKEN=6032470479:thisistoKeN4example
TG_CHAT_ID=@thisisxamplename

```
- Установить зависимости командой
```
pip install -r requirements.txt
```
### Как запустить

#### Скачивание картинок

1. Фотографии с запуска SpaceX
```
python3 spacex_launch_photo.py
```
данный скрипт скачивает фотографии последнего запуска SpaceX. Можно указать аргумент ID запуска.

Если возвращается ошибка 404 - вероятнее всего фотографии на запрашиваемом запуске не делались. 

2. Астрономические картинки дня с сайта NASA

В данном скрипте необходимо указать обязательный аргумент - необходимое количество фото для скачивания, например 10:

```
python3 nasa_apod_photo.py 10
```
3. Фотографии с камеры полихроматического изображения Земли

Скрипт загружает фотографии с камеры полихроматического изображения Земли с самой последней датой съемки. По умолчанию загружаются все фотографии с последней датой, при этом количество можно ограничить, указав необязательный параметр count.

```
python3 nasa_epic_photo.py
```
#### Публикация фотографий в телеграм канал

Можно выгрузить случайное фото (команда без аргумента) или фото по имени файла. 
```
python3 post_to_tg_channel.py -p nasa_APOD_5.jpg
```
Так же можно задать автопубликацию через каждые 4 часа
```
python3 post_to_tg_channel.py -su True
```
Если необходимо изменить время, через которое делать автопубликацию - в переменной окружения `.env` необходимо задать параметр  `PUBLICATION_TIME` в секундах:
```
PUBLICATION_TIME=14400
```

### Вспомогательные функции


- `get_file_extension` - получение расширение скачиваемого файла
- `save_picture` - сохранение картинок в папку images
- `get_images_to_upload` - создает список фотографий для публикации. Если размер фотографии больше 20мб - уменьшает её до расширения в пределах 800 на 600
